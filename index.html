<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Provinces and Products Analysis</title>
</head>
<body>
    <h1>Provinces and Products Analysis</h1>

    <h2>ForEach Basics</h2>
    <ul id="nameProvincePairs"></ul>

    <h2>Uppercase Provinces</h2>
    <p id="uppercaseProvinces"></p>

    <h2>Name Lengths</h2>
    <p id="nameLengths"></p>

    <h2>Sorted Provinces</h2>
    <p id="sortedProvinces"></p>

    <h2>Filtered Provinces</h2>
    <p id="remainingProvincesCount"></p>

    <h2>Finding 'S' in Names</h2>
    <p id="hasS"></p>

    <h2>Name to Province Mapping</h2>
    <pre id="nameProvinceMapping"></pre>

    <h2>Advanced Exercises</h2>
    <pre id="results"></pre>

    <script>
        const provinces = ['Western Cape', 'Gauteng', 'Northern Cape', 'Eastern Cape', 'KwaZulu-Natal', 'Free State'];
        const names = ['Ashwin', 'Sibongile', 'Jan-Hendrik', 'Sifso', 'Shailen', 'Frikkie'];
        const products = [
            { product: 'banana', price: "2" },
            { product: 'mango', price: 6 },
            { product: 'potato', price: ' ' },
            { product: 'avocado', price: "8" },
            { product: 'coffee', price: 10 },
            { product: 'tea', price: '' },
        ];

        const nameProvincePairs = names.map((name, index) => `${name} (${provinces[index]})`);
        document.getElementById('nameProvincePairs').innerHTML = nameProvincePairs.map(pair => `<li>${pair}</li>`).join('');

        document.getElementById('uppercaseProvinces').textContent = provinces.map(province => province.toUpperCase()).join(", ");
        document.getElementById('nameLengths').textContent = names.map(name => name.length).join(", ");
        document.getElementById('sortedProvinces').textContent = [...provinces].sort().join(", ");

        const filteredProvinces = provinces.filter(province => !province.includes('Cape'));
        document.getElementById('remainingProvincesCount').textContent = `Remaining provinces count: ${filteredProvinces.length}`;

        document.getElementById('hasS').textContent = JSON.stringify(names.map(name => name.toLowerCase().includes('s')));

        const nameProvinceMapping = names.reduce((acc, name, index) => {
            acc[name] = provinces[index];
            return acc;
        }, {});
        document.getElementById('nameProvinceMapping').textContent = JSON.stringify(nameProvinceMapping, null, 2);

        const results = {
            logProducts: products.map(p => p.product),
            filteredByNameLength: products.filter(p => p.product.length <= 5),
            totalPrice: products
                .filter(p => String(p.price).trim() !== '')
                .map(p => ({ ...p, price: Number(p.price) }))
                .reduce((sum, p) => sum + p.price, 0),
            concatenatedProductNames: products.map(p => p.product).join(', '),
            priceExtremes: (() => {
                const pricedProducts = products
                    .filter(p => String(p.price).trim() !== '')
                    .map(p => ({ ...p, price: Number(p.price) }));
                const highest = pricedProducts.reduce((max, p) => (p.price > max.price ? p : max), pricedProducts[0]);
                const lowest = pricedProducts.reduce((min, p) => (p.price < min.price ? p : min), pricedProducts[0]);
                return `Highest: ${highest.product}. Lowest: ${lowest.product}.`;
            })(),
            objectTransformation: products.map(p => ({ name: p.product, cost: String(p.price).trim() === '' ? null : Number(p.price) }))
        };

        document.getElementById('results').textContent = JSON.stringify(results, null, 2);
    </script>
</body>
</html>